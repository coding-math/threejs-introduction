name: Merge Main to Deploy

on:
  push:
    branches:
      - main

jobs:
  merge-main-to-deploy:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v3
      with:
        ref: deploy
    
    - name: Git config
      run: |
        git config --global user.name "Matheus Silva"
        git config --global user.email matheus.souza28042001@gmail.com

    - name: Verify branches
      run: |
        git branch -a

    - name: Update deploy branch
      run: |
        git fetch
        git pull origin deploy

    - name: Merge main to deploy
      run: |
        git fetch
        git merge origin/main
        git push origin deploy
